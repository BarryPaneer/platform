<%!
from openedx.core.djangoapps.site_configuration import helpers as configuration_helpers
from django.conf import settings
%>

% if user.is_authenticated:
    <script>
        window.intercomSettings = {
        app_id: "a885xj85",
        name: "${user.first_name}", // Full name
        email: "${user.email}", // Email address
        created_at: "${user.date_joined}" // Signup date as a Unix timestamp
      };
    </script>
    
    <script>(function() {
            var w=window;
            var ic=w.Intercom;
            if (typeof ic==="function") {
                ic('reattach_activator');
                ic('update',w.intercomSettings);
            } else {
                var d=document;
                var i=function() {
                    i.c(arguments);
                };
                i.q=[];
                i.c=function(args) {
                    i.q.push(args);
                };
                w.Intercom=i;
                var l=function() {
                    var s=d.createElement('script');
                    s.type='text/javascript';
                    s.async=true;s.src='https://widget.intercom.io/widget/a885xj85';
                    var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);
                };
                if (w.attachEvent) {
                    w.attachEvent('onload',l);
                } else {
                    w.addEventListener('load',l,false);}
            }
        })();
    </script>
% endif

% if configuration_helpers.get_value('ENABLE_ZENDESK_WIDGET', settings.FEATURES.get('ENABLE_ZENDESK_WIDGET', False)):
    <script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=d95bfedc-19ec-4ea3-937f-c2cf0cbff31e"> </script>
% endif

<!-- Hotjar Tracking Code -->
% if configuration_helpers.get_value('IS_HOTJAR_ENABLED', settings.FEATURES.get('IS_HOTJAR_ENABLED', False)):
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:2444471,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
% endif